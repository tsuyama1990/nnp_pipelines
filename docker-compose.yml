services:
  gen_worker:
    build:
      context: .
      dockerfile: workers/gen_worker/Dockerfile
    image: gen_worker:latest
    volumes:
      - ./data:/data
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]

  dft_worker:
    build:
      context: .
      dockerfile: workers/dft_worker/Dockerfile
    image: dft_worker:latest
    volumes:
      - ./data:/data

  pace_worker:
    build:
      context: .
      dockerfile: workers/pace_worker/Dockerfile
    image: pace_worker:latest
    volumes:
      - ./data:/data
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]

  lammps_worker:
    build:
      context: .
      dockerfile: workers/al_md_kmc_worker/Dockerfile
    image: lammps_worker:latest
    volumes:
      - ./data:/data
